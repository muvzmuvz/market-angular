<app-navbar></app-navbar>

<div class="container">

  <div class="card profile-card">
    <div class="card-header">
      <div class="profile-info">
        <h1 class="title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{username}}!</h1>
      </div>

      <div class="avatar" (mouseenter)="hover = true" (mouseleave)="hover = false" (click)="fileInput.click()"
        style="position: relative; cursor: pointer;">
        <tui-avatar size="xxl" class="lg" [src]="avatar"></tui-avatar>

        <div *ngIf="hover" class="avatar-overlay">
          –ò–∑–º–µ–Ω–∏—Ç—å
        </div>

        <input #fileInput type="file" accept="image/*" (change)="onFileSelected($event)" style="display: none;" />
      </div>
    </div>

    <div class="card-body">
      <p class="description">–≠—Ç–æ –≤–∞—à–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è.</p>
      <p class="description">–í—ã –º–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–≤–æ–µ–º –ø—Ä–æ—Ñ–∏–ª–µ –∑–¥–µ—Å—å.</p>
    </div>

    <button class="btn-edit-profile" (click)="openEditModal()">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
  </div>

  <div class="card orders-card">
    <h2 class="title orders-title">–ú–æ–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã</h2>

    <div class="orders" *ngIf="recentOrders.length > 0; else noOrders">
      <app-order-card *ngFor="let order of recentOrders" [order]="order"></app-order-card>
    </div>

    <ng-template #noOrders>
      <div class="no-orders">
        <p class="description">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤ üòî</p>
        <a href="/" class="btn-view-all">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º</a>
      </div>
    </ng-template>

    <div class="all-orders">
      <a href="/delivery" class="btn-view-all">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞–∫–∞–∑—ã</a>
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div class="modal-backdrop" *ngIf="isEditModalOpen">
  <div class="modal">
    <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h2>
    <label>
      –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
      <input type="text" [(ngModel)]="editUsername" />
    </label>
    <label>
      URL –∞–≤–∞—Ç–∞—Ä–∞:
      <input type="text" [(ngModel)]="editAvatar" />
    </label>
    <div class="modal-buttons">
      <button (click)="saveProfile()" class="btn-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button (click)="cancelEdit()" class="btn-cancel">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>